<template>
    <q-page class="q-pa-sm fit column no-wrap q-gutter-y-sm">
        <!-- TOP -->
        <!-- <div class="col-auto">
            <PponInfoTable />
        </div> -->
        <div class="col-auto">
            <form v-on:submit.prevent="customer_information" method="POST">
            <div>
                <fieldset>
                <select class="input-middle" v-model="CUST_NO_TYPE">
                    <option value="ê°œì¸" selected>ê°œì¸</option>
                    <option value="ì‚¬ì—…ì">ì‚¬ì—…ì</option>
                </select>
                
                <select class="input-middle" v-model="CUST_NO_TYPE_SELECT" style="margin: 5px;">
                    <option value="ì£¼ë¯¼ë²ˆí˜¸">ì£¼ë¯¼ë²ˆí˜¸</option>
                    <option value="ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸">ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸</option>
                </select>
  
                <select class="input-short" v-model="COUNTRY">
                    <option value="ë‚´êµ­ì¸">ë‚´êµ­ì¸</option>
                    <option value="ì™¸êµ­ì¸">ì™¸êµ­ì¸</option>
                </select><br>
                
                <input class="input-middle" v-model="CUST_NAME" type="text" style="margin: 5px;">
                <input class="input-middle" v-model="CUST_NO" type="text" style="margin: 5px;">
                
                <a href="PrivacyPolicy.html" onclick="window.open(this.href, '_blank', 'width=800, height=600'); return false;" style="margin:10px;">* ê°œì¸ì •ë³´í™œìš© ë™ì˜</a>
  
                <input type="radio" id="yes" value="ì˜ˆ" v-model="INFO_ASSENT_FLAG">
                <label for="yes" style="margin:5px;">ì˜ˆ</label>
                <input type="radio" id="no" value="ì•„ë‹ˆì˜¤" v-model="INFO_ASSENT_FLAG">
                <label for="no" style="margin:5px;">ì•„ë‹ˆì˜¤</label>
                <button type="submit">ê³ ê°ê²€ì¦</button>
                </fieldset>
            </div>
            </form>
        </div>
  
        <div class="card-container">
            <!-- ì™¼ìª½ ì¹´ë“œ ë‚´ìš© -->
            <div class="card left-card">
            <form action="" name="ì²­êµ¬ì •ë³´">
              <div>
                <legend style="margin:5px;">ì²­êµ¬ì •ë³´</legend>
                <select v-model="ì²­êµ¬ìƒí’ˆêµ¬ë¶„ì½”ë“œ" style="margin:5px;" >
                    <option value="">ì²­êµ¬ìƒí’ˆêµ¬ë¶„ì½”ë“œ1</option>
                    <option value="">ì²­êµ¬ìƒí’ˆêµ¬ë¶„ì½”ë“œ2</option>
                </select>
              </div>
                <br>
                <fieldset>
                    <input class="input-long" v-model="ì²­êµ¬ë²ˆí˜¸" id="name" placeholder="ì²­êµ¬ë²ˆí˜¸" style="float:left;">
                    <button style="margin:5px; padding: 0px 5px; float:right;">ì²­êµ¬ë²ˆí˜¸ì¡°íšŒ</button><br>
  
                    <select class="input-middle" v-model="ì²­êµ¬ë²ˆí˜¸êµ¬ë¶„">
                        <option selected value="">ì²­êµ¬ë²ˆí˜¸êµ¬ë¶„</option>
                        <option></option>
                        <option></option>
                    </select>
  
                    <input class="input-middle" v-model="receiver" id="name" placeholder="ì²­êµ¬ì„œìˆ˜ë ¹ì¸"><br>
                
                    <select class="input-middle" v-model="ë°œì†¡í˜•íƒœ">
                        <option selected value="">ë°œì†¡í˜•íƒœ</option>
                        <option></option>
                        <option></option>
                    </select>
  
                    <select class="input-middle" v-model="ì„ íƒ">
                        <option selected value="">[ì„ íƒ]</option>
                        <option></option>
                        <option></option>
                    </select><br>
                
                    <input class="input-middle" v-model="email" placeholder="example@co.kr"><br>
                    <!-- <button>ì´ë©”ì¼ ê²€ì¦</button><br> -->
                    
                    <input class="input-middle" v-model="ëª¨ë°”ì¼ë²ˆí˜¸" id="name" placeholder="ëª¨ë°”ì¼ë²ˆí˜¸">
                    <!-- <button>ì´ë™ì „í™”ì„ íƒ</button> -->
                    
                    <br><label for="ì£¼ì†Œ">ì£¼ì†Œ</label><br>
                
                    <select class="input-long" v-model="ë‚©ë¶€ë°©ë²•">
                        <option selected value="">ê³„ì¢Œìë™ì´ì²´</option>
                        <option value="">ì¹´ë“œìë™ì´ì²´</option>
                    </select>
                    <select class="input-short" v-model="ë‚©ë¶€ì¼">
                        <option v-for="day in days" :key="day" :value="day">ë§¤ë‹¬ {{ day }}ì¼</option>
                    </select><br>
  
                    <select class="input-middle" v-model="value">
                        <option selected value="">ì¼€ì´ë±…í¬</option>
                    </select>
  
                    <input class="input-middle" v-model="ì¹´ë“œê³„ì¢Œë²ˆí˜¸"  placeholder="ì¹´ë“œ/ê³„ì¢Œë²ˆí˜¸"><br>
                    <input class="input-middle" v-model="ë‚©ë¶€ê³ ê°ëª…" placeholder="ë‚©ë¶€ê³ ê°ëª…">
                    <input class="input-middle" v-model="ìƒë…„ì›”ì¼ì‚¬ì—…ìë²ˆí˜¸" placeholder="ìƒë…„ì›”ì¼/ì‚¬ì—…ìë²ˆí˜¸"><br>
                    <button>ì²­êµ¬ë²ˆí˜¸ìƒì„±</button>
                </fieldset>
            </form><br>
  
            <form action="" name="íŒë§¤ì •ë³´">
            <legend>íŒë§¤ì •ë³´</legend>
            <fieldset>
                <label for="íŒë§¤ììœ í˜•">íŒë§¤ììœ í˜•</label>
                <select class="input-middle" v-model="íŒë§¤ììœ í˜•">
                    <option selected value="">íŒë§¤ììœ í˜•1</option>
                    <option value="">íŒë§¤ììœ í˜•2</option>
                </select>
            
                <label for="íŒë§¤ì§ì›">íŒë§¤ì§ì›</label>
                <input class="input-short" v-model="íŒë§¤ì§ì›" placeholder="ì§ì›ëª…">
            </fieldset>
            </form>
        </div>
  
        <!-- ì˜¤ë¥¸ìª½ ì¹´ë“œ ë‚´ìš© -->
        <div class="card right-card">
            <form v-on:submit.prevent="customer_information" method="POST" name="PSTN" >
                <legend>PSTN</legend>
                <fieldset style="padding:5px;">
                    <label style="margin:5px;" for="ìƒí’ˆìœ í˜•">ìƒí’ˆìœ í˜•</label>
                    <select v-model="ìƒí’ˆìœ í˜•" style="margin-right: 10px">
                        <option selected value="">ì¼ë°˜ì „í™”</option>
                    </select>
  
                    <label for="ì²­ì•½ëŒ€ìˆ˜">ì²­ì•½ëŒ€ìˆ˜</label>
                    <input v-model="ì²­ì•½ëŒ€ìˆ˜" type="number" placeholder="" style="width: 100px; margin: 5px;">
                    <button type="submit">ì‚¬ì „ì²´í¬</button>
                </fieldset>
            </form>
  
            <form v-on:submit.prevent="install_location" method="POST" name="ì„¤ì¹˜ì¥ì†Œ">
            <legend>ì„¤ì¹˜ì¥ì†Œ</legend>
            <fieldset>
                <label for="ì„¤ì¹˜ì£¼ì†Œ">ì„¤ì¹˜ì£¼ì†Œ</label>
                <input class="input-short" v-model="postcode" placeholder="ìš°í¸ë²ˆí˜¸">
                <input type="button" @click="execDaumPostcode()" value="ìš°í¸ë²ˆí˜¸ ì°¾ê¸°"><br>
                <input class="input-longlong" v-model="address"  placeholder="ì£¼ì†Œ"><br>
                <input class="input-middle" v-model="extraAddress" placeholder="ìƒì„¸ì£¼ì†Œ">
            </fieldset>     
            </form>
  
              <form name="ê°€ì„¤ì˜ˆì•½">
              <legend>ê°€ì„¤ì˜ˆì•½</legend>
                  <fieldset>
                      <label for="ê³ ê°í¬ë§ì¼ì‹œ">ê³ ê°í¬ë§ì¼ì‹œ</label>
                      <VueDatePicker class="datepicker"
                          v-model="RESV_DATE"
                          locale="ko"
                          :format="'YYYYMMDDHH'"
                          time-picker-inline
                          week-start="0"
                          position="left"
                          placeholder="ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”."
                          auto-apply
                          :clearable="true"
                          @update:modelValue="updateDate"/>
                    
                      <label for="ê°€ì„¤ì—°ë½ì²˜">ê°€ì„¤ì—°ë½ì²˜</label>
                      <input v-model="INSTL_TEL_NO" placeholder="">
                  </fieldset>
              </form>
  
              <form action="" name="ê°€ì…ì •ë³´ - ì¼ë°˜ì „í™”">
                  <legend>ê°€ì…ì •ë³´ - ì¼ë°˜ì „í™”</legend>
                  <fieldset>
                      <label for="ì‹œì™¸ì‚¬ì—…ì">ì‹œì™¸ì‚¬ì—…ì</label>
                      <select v-model="ì‹œì™¸ì‚¬ì—…ì">
                          <option value=""></option>
                          <option>??</option>
                      </select>
                  
                      <label for="ë²ˆí˜¸ë¶€ì—¬">ë²ˆí˜¸ë¶€ì—¬</label>
                      <select v-model="ë²ˆí˜¸ë¶€ì—¬">
                          <option value=""></option>
                          <option>??</option>
                      </select>
  
                  
                      <label for="ì•ˆì‹¬ì„¼í„°ê²€ì¦ë°©ë²•">ì•ˆì‹¬ì„¼í„°ê²€ì¦ë°©ë²•</label>
                      <select v-model="ì•ˆì‹¬ì„¼í„°ê²€ì¦ë°©ë²•">
                          <option value=""></option>
                          <option>??</option>
                      </select>
  
                      <label for="">114/ì „í™”ë²ˆí˜¸ë¶€</label>
                      <input v-model="option1" id="name" placeholder="114"> /
                      <input v-model="option2" id="number" placeholder="ì „í™”ë²ˆí˜¸ë¶€">
                  </fieldset>
              </form>
  
              <form v-on:submit.prevent="application_info" name="ì‹ ì²­">
                  <fieldset>
                      <label for="ì‹ ì²­ì •ë³´">ì‹ ì²­ë°©ë²•</label>
                      <select class="input-middle" v-model="Aplc_select">
                          <option value="">ì‹ ì²­ë°©ë²•</option>
                          <option>??</option>
                      </select>
  
                      <label for="ì‹ ì²­ì •ë³´">ì‹ ì²­ì •ë³´</label>
                      <select class="input-middle" v-model="Aplc_info">
                          <option value="">ì‹ ì²­ì •ë³´</option>
                          <option>??</option>
                      </select>
  
                      <input class="input-long" v-model="Aplc_info_text" id="name" placeholder="">
                  </fieldset>
              </form>
          </div>
      </div>
    
      <form v-on:submit.prevent="save_info" style="float:right;">
          <button style="float:right;">ì‚­ì œ</button>
          <button style="float:right;" type="submit">ì €ì¥</button>
      </form>
      </q-page>
  </template>
  
  
  <script lang="ts">
  // import PponInfoTable from '../components/PponInfoTable.vue';
  // import PrivacyPolicy from '../components/PrivacyPolicy.vue';
  import axios from 'axios';
  
  export default {
      components:{
      },
      data(): {
      CUST_NO_TYPE: string;
      CUST_NO_TYPE_SELECT: string;
      COUNTRY: string;
      CUST_NAME: string;
      CUST_NO: string;
      INFO_ASSENT_FLAG: string;
      ë‚©ë¶€ì¼: string;
      days: number[];
      postcode: string;
      address: string;
      extraAddress: string;
      ADDR_TEXT: string;
      RESV_DATE: Date | null;
      INSTL_TEL_NO: string;
  } {
      return {
          CUST_NO_TYPE: 'ê°œì¸',
          CUST_NO_TYPE_SELECT: 'ì£¼ë¯¼ë²ˆí˜¸',
          COUNTRY: 'ë‚´êµ­ì¸',
          CUST_NAME: '',
          CUST_NO: '',
          INFO_ASSENT_FLAG: '',
          ë‚©ë¶€ì¼: '',
          days: Array.from({ length: 31 }, (_, index) => index + 1),
          postcode: '',
          address: '',
          extraAddress: '',
          ADDR_TEXT: '',
          RESV_DATE: null,
          INSTL_TEL_NO: '',
      };
  },
  
  methods: {
      // ê³ ê° ì •ë³´ í™•ì¸
        customer_information() {
          // ìš”ì²­ ë°ì´í„° êµ¬ì„±
          let reqJson = {
          'inDs': {
              'custNoType': this.CUST_NO_TYPE === 'ê°œì¸' ? 1 : 3,
              'custName': this.CUST_NAME,
              'custNo': this.CUST_NO,
              }   
          };
  
          console.log('ğŸ”¥', reqJson);
  
          // POST ìš”ì²­ ë³´ë‚´ê¸°
          axios.post('/mvp/baseinfo/selectcustbas', reqJson, {
          headers: { 'content-type': 'application/json' }
          })
          .then((res) => {
          console.log('ğŸ”¥', res.data.outListDs[0].cntcTelNo);
  
          // res.dataì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ Vue ì¸ìŠ¤í„´ìŠ¤ì˜ v-model ì†ì„±ì— ë°˜ì˜í•©ë‹ˆë‹¤.
          this.address = res.data.outListDs[0].addrText; // addressì— addrText ê°’ì„ ì‚½ì…í•©ë‹ˆë‹¤.
          
          // RESV_DATE ê°’ì„ ì„¤ì •í•˜ê¸° ìœ„í•´ 'completedResvDateHh' ê°’ì„ ê°€ì ¸ì™€ ë³€í™˜í•©ë‹ˆë‹¤.
          const resvDate = res.data.outListDs[0].completedResvDateHh;
          if (resvDate) {
              // resvDateëŠ” ë¬¸ìì—´ í˜•íƒœì´ë¯€ë¡œ Date ê°ì²´ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
              const year = parseInt(resvDate.slice(0, 4), 10);
              const month = parseInt(resvDate.slice(4, 6), 10) - 1;
              const day = parseInt(resvDate.slice(6, 8), 10);
              const hour = parseInt(resvDate.slice(8, 10), 10);
              // Date ê°ì²´ ìƒì„±
              this.RESV_DATE = new Date(year, month, day, hour);
          }
          
          // INSTL_TEL_NOì— cntcTelNo ê°’ì„ ì‚½ì…í•©ë‹ˆë‹¤.
          this.INSTL_TEL_NO = res.data.outListDs[0].cntcTelNo;
          
          alert(res.data.outDs.result);
          })
          .catch((error) => {
          console.log(error);
          });
          
          },
          // ê³ ê°í¬ë§ì¼ì‹œ í˜•ì‹ ë³€í™˜ìš© í•¨ìˆ˜
          updateDate(newDate) {
              if (newDate) {
              const year = newDate.getFullYear();
              const month = String(newDate.getMonth() + 1).padStart(2, '0');
              const day = String(newDate.getDate()).padStart(2, '0');
              const hours = String(newDate.getHours()).padStart(2, '0');
              this.RESV_DATE = `${year}${month}${day}${hours}`;
              }
          },
          save_info() {
              // ê°€ì„¤ ì˜ˆì•½ ì •ë³´
              console.log('ê³ ê°í¬ë§ì¼ì‹œ:', this.RESV_DATE, "\n", 'ê°€ì„¤ì—°ë½ì²˜:',this.INSTL_TEL_NO);
              // ì„¤ì¹˜ ì¥ì†Œ í™•ì¸
              console.log('ì „ì²´ ì£¼ì†Œ:', this.ADDR_TEXT);
          },
          execDaumPostcode() {
              new window.daum.Postcode({
                  oncomplete: (data) => {
                      if (this.extraAddress !== '') {
                          this.extraAddress = '';
                      }
                      if (data.userSelectedType === 'R') {
                          // ì‚¬ìš©ìê°€ ë„ë¡œëª… ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°
                          this.address = data.roadAddress;
                      } else {
                          // ì‚¬ìš©ìê°€ ì§€ë²ˆ ì£¼ì†Œë¥¼ ì„ íƒí–ˆì„ ê²½ìš°(J)
                          this.address = data.jibunAddress;
                      }
                      // ì£¼ì†Œ ì €ì¥
                      this.postcode = data.zonecode;
                      this.ADDR_TEXT = this.address + this.extraAddress;
                      }
                  }).open();
          }
      }
  };
  </script>
  
  
  <style lang="scss" scoped>
      label {
          margin: 5px;
      }
      form {
          // margin-top: 5px;
          margin-bottom: 5px;
      }
      .row {
          display: flex;
      }
      .row > div {
          margin-right: 10px; /* ìš”ì†Œë“¤ ê°„ì˜ ê°„ê²© ì¡°ì • */
      }
      .required {
          background-color: rgb(255, 236, 131);
      }
      // input = 150*25
      .card-container {
          display: flex;
      }
      .card {
          flex: 1;
          margin: 5px; /* ì¹´ë“œ ì‚¬ì´ì˜ ì—¬ë°± ì„¤ì • */
          padding: 5px; /* ì¹´ë“œ ë‚´ë¶€ ì—¬ë°± ì„¤ì • */
      //   border: 1px solid #ccc; /* ì¹´ë“œ í…Œë‘ë¦¬ ì„¤ì • */
      }
      .left-card {
          max-width: 305px; /* ì™¼ìª½ ì¹´ë“œ ë„ˆë¹„ ì„¤ì • */
      }
      .right-card {
          max-width: 70%; /* ì˜¤ë¥¸ìª½ ì¹´ë“œ ë„ˆë¹„ ì„¤ì • */
      }
      .popup-view{
          opacity: 0;
          display: none;
          visibility: hidden;
      }
      .active{
          opacity: 1;
          display: block;
          visibility: visible;
      }
  
      .input-short {
          width: 100px;
          height: 25px;
          margin: 5px;
      }
      .input-middle {
          width: 125px;
          height: 25px;
          margin: 5px;
      }
      .input-long {
          width: 150px;
          height: 25px;
          margin: 5px;
      }
      .input-longlong {
          width: 400px;
          height: 25px;
          margin: 5px;
      }
  
      legend{
          margin:5px;
          font-weight: 700;
          font-size: 18px;
      }
      button{
          margin:5px; 
          padding: 0px 5px; 
          float: right;
      }
      fieldset{
          padding:5px;
      }
  </style>
  